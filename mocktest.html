<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>InsightPrep - Where Preparation Meets Reflection</title>
  <style>
    /* ============================================
       CURSOR FIX - Ensure no text cursor on labels
    ============================================ */
    
    /* Universal cursor fix - highest priority */
    label,
    label *,
    .question-card label,
    .question-card label *,
    input[type="radio"] + label,
    input[type="checkbox"] + label,
    input[type="radio"],
    input[type="checkbox"] {
      cursor: pointer !important;
      -webkit-user-select: none !important;
      -moz-user-select: none !important;
      -ms-user-select: none !important;
      user-select: none !important;
    }

    /* ============================================
       GLOBAL STYLES & LAYOUT
    ============================================ */
    html, body {
      height: 100%;
      min-height: 100%;
      overflow-x: hidden; /* Prevent horizontal scrollbar */
    }
    
    body {
      font-family: Arial, sans-serif;
      background: #f4f6f8;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      width: 100%;
      box-sizing: border-box;
    }
    
    header {
      background: #0078d7;
      color: white;
      width: 100%;
      padding: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5em;
      font-weight: bold;
      line-height: 1.3;
      position: relative;
    }
    
    .header-logo {
      position: absolute;
      left: 20px;
      height: 80px;
      width: auto;
      max-width: 200px;
    }
    
    .header-content {
      text-align: center;
      flex: 1;
    }
    
    main {
      max-width: 900px;
      width: 95%;
      margin: 20px auto;
      flex: 1 0 auto;
      box-sizing: border-box;
      overflow-x: hidden;
    }

    /* Ensure all elements use border-box sizing */
    *, *::before, *::after {
      box-sizing: border-box;
    }

    /* Global cursor reset for interactive elements */
    label, label *, input[type="radio"], input[type="checkbox"], button {
      cursor: pointer !important;
    }

    /* ============================================
       BUTTONS & CONTROLS
    ============================================ */
    .controls {
      margin: 20px 0;
      text-align: center;
    }
    
    #fileInput { 
      display: none; 
    }
    
    .custom-btn, button {
      background: #0078d7;
      color: white;
      padding: 10px 20px;
      border: 1px solid transparent;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1em;
      transition: all 0.2s ease;
    }
    
    button {
      font-size: 0.95em;
      margin-top: 8px;
    }
    
    /* Ensure Choose DB button has same dimensions as Choose JSON */
    button.custom-btn {
      padding: 10px 20px;
      font-size: 1em;
      margin-top: 0;
    }
    
    .custom-btn:hover, button:hover { 
      background: #005ea3; 
      border: 1px solid #0078d7;
    }

    .custom-btn:focus, button:focus { 
      outline: none;
      border: 1px solid #0078d7;
      box-shadow: 0 0 4px rgba(0,120,215,0.4);
    }
    
    #restart, #restart-bottom, #newtest { 
      margin: 20px 10px; 
      display: none; 
    }

    /* ============================================
       QUESTION CARDS & CONTENT
    ============================================ */
    .file-chosen {
      margin: 10px auto;
      padding: 10px;
      background: #e6ffed;
      border: 1px solid #00a854;
      border-radius: 6px;
      text-align: center;
      font-weight: bold;
      color: #006633;
    }
    
    .question-card {
      background: white;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 15px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      border: 1px solid transparent;
    }
    
    .question-card h3 { 
      margin-top: 0; 
    }
    
    /* Question States */
    .disabled { 
      pointer-events: none; 
      opacity: 0.6; 
    }
    
    .active { 
      border: 1px solid #0078d7; 
      box-shadow: 0 0 6px rgba(0,120,215,0.3); 
    }
    
    .locked { 
      pointer-events: none; 
      opacity: 1 !important; 
    }
    
    /* Answer Feedback */
    .correct { 
      color: green; 
      font-weight: bold; 
    }
    
    .wrong { 
      color: red; 
      font-weight: bold; 
    }
    
    .correct-answer {
      color: #2e7d32;
      font-weight: bold;
      margin-top: 8px;
      padding: 6px 10px;
      background: #e8f5e8;
      border-left: 4px solid #4caf50;
      border-radius: 4px;
    }
    
    .explanation { 
      margin-top: 8px; 
      font-style: italic; 
    }
    
    .reference { 
      margin-top: 4px; 
      font-size: 0.9em; 
      color: #333; 
    }

    /* ============================================
       SCORING & MESSAGES
    ============================================ */
    #scoreboard {
      margin: 20px 0;
      font-size: 1.2em;
      text-align: center;
    }
    
    #message {
      font-size: 1.1em;
      margin-top: 10px;
      font-weight: bold;
    }
    
    #message.excellent { color: green; }
    #message.good { color: #0078d7; }
    #message.fair { color: orange; }
    #message.poor { color: red; }

    /* ============================================
       FILTER PANELS
    ============================================ */
    .filter-panel {
      background: #fff;
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 20px;
      margin: 10px 0 20px 0;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    
    .filter-panel h3 {
      margin-top: 0;
      color: #0078d7;
    }
    
    .filter-section { 
      margin-bottom: 15px; 
    }
    
    /* Topic hierarchy styles */
    .topic-hierarchy {
      max-height: 400px;
      overflow-y: auto;
      border: 1px solid #e0e0e0;
      border-radius: 4px;
      padding: 10px;
      background: #fafafa;
    }
    
    .topic-item {
      border-bottom: 1px solid #e0e0e0;
      padding-bottom: 8px;
      margin-bottom: 10px;
    }
    
    .topic-item:last-child {
      border-bottom: none;
      margin-bottom: 0;
    }
    
    .subtopics-container {
      background: white;
      border-radius: 3px;
      padding: 8px;
      border-left: 1px solid #0078d7;
    }
    
    .topic-checkbox {
      font-weight: bold !important;
    }
    
    .subtopic-checkbox {
      font-size: 0.9em;
      color: #555;
    }
    
    label { 
      cursor: pointer !important; 
    }

    /* Ensure all clickable labels show pointer cursor */
    .question-card label,
    label[for],
    input[type="radio"] + label,
    input[type="checkbox"] + label {
      cursor: pointer !important;
    }

    /* Additional specificity for form elements */
    form label,
    .question-card form label,
    div label,
    .filter-section label,
    .controls label {
      cursor: pointer !important;
    }

    /* Override any inherited text cursor */
    * label {
      cursor: pointer !important;
    }

    /* Ensure input elements themselves don't affect label cursor */
    input[type="radio"],
    input[type="checkbox"] {
      cursor: pointer !important;
    }

    /* Fix text wrapping alignment for radio buttons and checkboxes */
    .question-card label {
      display: block;
      text-indent: -30px;
      padding-left: 30px;
      line-height: 1.4;
    }
    
    .question-card input[type="radio"],
    .question-card input[type="checkbox"] {
      margin-right: 8px;
      vertical-align: top;
    }

    /* ============================================
       MATCH QUESTIONS & TABLES
    ============================================ */
    .match-table {
      display: table;
      width: 100%;
      border-collapse: collapse;
      margin: 10px 0;
    }
    
    .match-row { 
      display: table-row; 
    }
    
    .match-cell {
      display: table-cell;
      padding: 6px 8px;
      vertical-align: middle;
    }
    
    .match-cell:first-child {
      font-weight: bold;
      width: 40%;
    }
    
    select {
      width: 100%;
      padding: 4px;
    }

    /* ============================================
       TOOLTIP SYSTEM
    ============================================ */
    .tooltip-container {
      position: relative;
      display: inline-block;
    }
    
    .tooltip {
      visibility: hidden;
      position: absolute;
      z-index: 1000;
      bottom: 125%;
      left: 50%;
      transform: translateX(-50%);
      background-color: #fff3cd;
      color: #856404;
      border: 2px solid #ffeaa7;
      border-radius: 8px;
      padding: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      width: 400px;
      max-width: 90vw;
      max-height: 80vh;
      overflow-y: auto;
      font-size: 0.9em;
      opacity: 0;
      transition: opacity 0.3s, visibility 0.3s;
    }
    
    .tooltip::after {
      content: "";
      position: absolute;
      top: 100%;
      left: 50%;
      margin-left: -8px;
      border-width: 8px;
      border-style: solid;
      border-color: #ffeaa7 transparent transparent transparent;
    }
    
    .tooltip-container:hover .tooltip {
      visibility: visible;
      opacity: 1;
    }
    
    .tooltip h4 {
      margin: 0 0 8px 0;
      color: #856404;
      font-size: 1em;
      text-align: center;
      border-bottom: 1px solid #856404;
      padding: 8px 4px 4px 4px;
      background-color: #fff3cd;
      position: sticky;
      top: 0;
      z-index: 1002;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .tooltip-table {
      width: 100%;
      border-collapse: collapse;
      margin: 8px 0;
      font-size: 0.85em;
      position: relative;
    }
    
    .tooltip-table th {
      background-color: #f8f4e6;
      border: 1px solid #856404;
      padding: 8px 6px;
      text-align: center;
      font-weight: bold;
      font-size: 0.8em;
      position: sticky;
      top: 40px;
      z-index: 1001;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .tooltip-table td {
      border: 1px solid #856404;
      padding: 6px;
      text-align: center;
      font-size: 0.85em;
      background-color: #fefcf7;
    }
    
    .tooltip-table tbody tr:nth-child(even) td {
      background-color: #f9f6f0;
    }
    
    .tooltip-table tbody tr:hover td {
      background-color: #f5f2e8;
    }
    
    .tooltip-table .random-row td {
      font-style: italic;
      background-color: #f0f0f0 !important;
      border-top: 2px solid #999 !important;
    }
    
    .tooltip-summary {
      margin-top: 10px;
      padding: 8px;
      border-top: 2px solid #856404;
      font-weight: bold;
      text-align: center;
      font-size: 0.9em;
      background-color: #f8f4e6;
      border-radius: 4px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }

    /* ============================================
       COPYRIGHT FOOTER
    ============================================ */
    #swamys-footer {
      position: fixed;
      left: 0;
      bottom: 0;
      z-index: 2000;
      background: rgba(255,255,255,0.95);
      color: #444;
      font-size: 13px;
      font-family: inherit;
      padding: 8px 18px 8px 12px;
      box-shadow: 0 -2px 8px rgba(0,0,0,0.07);
      border-top-right-radius: 10px;
      border-top: 1px solid #e0e0e0;
      border-right: 1px solid #e0e0e0;
      min-width: 340px;
      max-width: 90vw;
      line-height: 1.4;
      pointer-events: none;
      user-select: none;
    }
    
    #swamys-footer div { 
      white-space: pre-line; 
    }
    
    #swamys-copyright-card {
      position: fixed;
      left: 18px;
      bottom: 18px;
      z-index: 9999;
      background: rgba(245, 247, 250, 0.97);
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      border-radius: 8px;
      padding: 8px 12px 6px 12px;
      min-width: 180px;
      max-width: 240px;
      font-size: 0.85em;
      color: #222;
      font-family: 'Segoe UI', Arial, sans-serif;
      border: 1px solid #e0e0e0;
      opacity: 0.90;
      transition: all 0.3s ease;
      pointer-events: auto;
      user-select: none;
      text-align: left;
      display: block;
      transform: translateX(0);
    }

    #swamys-copyright-card.hidden {
      transform: translateX(-100%);
    }

    #swamys-copyright-card a {
      pointer-events: auto;
      cursor: pointer;
    }

    .copyright-toggle {
      position: absolute;
      right: -20px;
      top: 50%;
      transform: translateY(-50%);
      width: 20px;
      height: 40px;
      background: rgba(245, 247, 250, 0.97);
      border: 1px solid #e0e0e0;
      border-left: none;
      border-radius: 0 6px 6px 0;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 10px;
      color: #666;
      transition: all 0.3s ease;
      box-shadow: 2px 0 4px rgba(0,0,0,0.05);
    }

    .copyright-toggle:hover {
      background: rgba(200, 210, 220, 0.97);
    }

    .copyright-toggle-icon {
      transition: all 0.3s ease;
      font-size: 12px;
    }

    .copyright-toggle-icon::before {
      content: "❮";
    }

    #swamys-copyright-card.hidden .copyright-toggle-icon::before {
      content: "❯";
    }
    
    .swamys-copyright-main {
      font-weight: 500;
      margin-bottom: 2px;
      line-height: 1.2;
      font-size: 0.9em;
    }
    
    .swamys-copyright-author, .swamys-copyright-school {
      color: #1976d2;
      font-weight: 600;
    }
    
    .swamys-copyright-email {
      color: #666;
      font-size: 0.85em;
      font-style: italic;
    }
    
    .swamys-copyright-copy {
      font-size: 0.8em;
      color: #666;
      margin-top: 2px;
    }

    /* ============================================
       COPYRIGHT STATES
    ============================================ */
    body.sticky-footer #swamys-copyright-card {
      position: sticky !important;
      left: 0 !important;
      right: 0 !important;
      bottom: 0 !important;
      margin: 0 auto !important;
      width: 100vw !important;
      min-width: 0 !important;
      max-width: 100vw !important;
      border-radius: 0 !important;
      box-shadow: none !important;
      background: #f8fafc !important;
      border-top: 1px solid #e0e0e0 !important;
      opacity: 1 !important;
      padding: 8px 0 6px 0 !important;
      text-align: center !important;
      pointer-events: auto !important;
      display: block !important;
      transform: none !important;
      font-size: 0.8em !important;
    }

    body.sticky-footer #swamys-copyright-card .copyright-toggle {
      display: none !important;
    }
    
    body.hide-copyright-card #swamys-copyright-card {
      display: none !important;
    }

    /* ============================================
       RESPONSIVE DESIGN
    ============================================ */
    @media (max-width: 700px) {
      #swamys-copyright-card {
        position: static !important;
        left: unset !important;
        bottom: unset !important;
        width: 100vw !important;
        min-width: 0 !important;
        max-width: 100vw !important;
        border-radius: 0 !important;
        box-shadow: none !important;
        background: #f8fafc !important;
        border-top: 1px solid #e0e0e0 !important;
        opacity: 1 !important;
        margin: 0 !important;
        padding: 8px 0 6px 0 !important;
        text-align: center !important;
        pointer-events: auto !important;
        transform: none !important;
        font-size: 0.8em !important;
      }

      #swamys-copyright-card .copyright-toggle {
        display: none !important;
      }
      
      .swamys-copyright-main {
        font-size: 0.85em;
        margin-bottom: 2px;
      }
      
      .swamys-copyright-copy {
        font-size: 0.75em;
      }
    }
    
    @media (min-width: 701px) {
      body.sticky-footer #swamys-copyright-card {
        position: sticky !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        margin: 0 auto !important;
        width: 100vw !important;
        min-width: 0 !important;
        max-width: 100vw !important;
        border-radius: 0 !important;
        box-shadow: none !important;
        background: #f8fafc !important;
        border-top: 1px solid #e0e0e0 !important;
        opacity: 1 !important;
        padding: 8px 0 6px 0 !important;
        text-align: center !important;
        pointer-events: auto !important;
        transform: none !important;
        font-size: 0.8em !important;
      }

      body.sticky-footer #swamys-copyright-card .copyright-toggle {
        display: none !important;
      }
    }

    /* ============================================
       FINAL CURSOR OVERRIDE - Maximum Priority
    ============================================ */
    
    /* Ultimate cursor fix with maximum specificity */
    html body main .question-card label,
    html body main .question-card label *,
    html body main label,
    html body main label *,
    html body main input[type="radio"],
    html body main input[type="checkbox"],
    html body main .filter-section label,
    html body main .controls label,
    .correct,
    .wrong,
    .correct-answer,
    .explanation,
    .reference,
    .topic-subtopic-info,
    p.correct,
    p.wrong,
    p.correct-answer,
    p.explanation,
    p.reference {
      cursor: pointer !important;
      -webkit-user-select: none !important;
      -moz-user-select: none !important;
      -ms-user-select: none !important;
      user-select: none !important;
    }

    /* Specifically target feedback text elements */
    .question-card .correct,
    .question-card .wrong,
    .question-card .correct-answer,
    .question-card .explanation,
    .question-card .reference,
    .question-card p {
      cursor: default !important;
      -webkit-user-select: none !important;
      -moz-user-select: none !important;
      -ms-user-select: none !important;
      user-select: none !important;
    }

    /* Fix cursor for buttons including Try Again */
    button,
    .try-again-btn,
    .custom-btn,
    input[type="button"],
    input[type="submit"] {
      cursor: pointer !important;
      -webkit-user-select: none !important;
      -moz-user-select: none !important;
      -ms-user-select: none !important;
      user-select: none !important;
    }

    /* Additional fixes for Try Again button */
    button[onclick*="tryAgain"],
    .feedback-section button,
    [data-action="try-again"] {
      cursor: pointer !important;
      user-select: none !important;
      -webkit-user-select: none !important;
      -ms-user-select: none !important;
    }
  </style>
  
  <!-- ============================================
       JAVASCRIPT MODULE IMPORTS
       Loading order is critical for dependencies
  ============================================ -->
  
  <!-- Core Foundation Module - Must load first -->
  <script src="core-utils.js"></script>
  
  <!-- Application State Management - Depends on core-utils -->
  <script src="app-state.js"></script>
  
  <!-- Database Operations - Depends on core-utils and app-state -->
  <script src="database-manager.js"></script>
  
  <!-- UI Layout System - Standalone utility module -->
  <script src="ui-layout.js"></script>
  
  <!-- Test Execution Engine - Depends on app-state, core-utils, database-manager -->
  <script src="test-engine.js"></script>
  
  <!-- Filter Panel System - JSON mode filtering and validation -->
  <script src="json-filter-panel.js"></script>
  
  <!-- Database Filter Panel System - Database mode filtering (split for size) -->
  <script src="database-filter-panel.js"></script>
  
  <!-- Validation Popup System - Invalid questions reporting -->
  <script src="validation-popup.js"></script>
  
  <!-- Event Coordination - Depends on all modules above -->
  <script src="event-handlers.js"></script>
  
  <!-- Main Application Coordinator - Must load last -->
  <script src="main.js"></script>
  
</head>
<body>
  <header id="test-title">
    <img src="Logos/Logo.jpg" alt="InsightPrep Logo" class="header-logo">
    <div class="header-content">
      InsightPrep<br><span style="font-size: 0.75em; font-weight: normal; color: #e6f3ff; margin-top: 5px; display: inline-block;">Where Preparation Meets Reflection</span>
    </div>
  </header>
  <main>
    <div class="controls">
      <label for="fileInput" class="custom-btn" title="Select a test JSON file to begin. Loads questions and allows you to set filters before starting the test.">📂 Choose JSON</label>
      <input type="file" id="fileInput" accept=".json">
      <button id="chooseDb" class="custom-btn" style="margin-left:10px;" title="Choose questions from the SQLite database. Allows you to set filters and select the number of questions.">🗄️ Choose DB</button>
      <button id="backToOptions" style="display:none; margin-left:10px;" title="Go back to the options page to modify filters or settings without choosing database again.">⬅️ Back to Options</button>
      <button id="restart" style="display:none; margin-left:10px;" title="Restart the current test instantly using the same filters and explanation mode. Does not show the filter screen again.">🔄 Restart Test</button>
      <button id="newTestSameOptions" style="display:none; margin-left:10px;" title="Start a new test with the same filters and number of questions but different set of questions.">🎲 New Questions</button>
      <button id="backToStartFromOptions" style="display:none; margin-left:10px; background-color:#6c757d;" class="custom-btn" title="Return to the start page to see the how-to-use guide and file selection options">← Back to Start Page</button>
    </div>
    <div id="file-chosen"></div>
    
    <!-- Comprehensive How-to-Use Guide -->
    <div id="how-to-use-guide" style="margin: 20px auto; max-width: 1200px; background: linear-gradient(135deg, #f8fafc 0%, #e3f2fd 100%); border-radius: 12px; padding: 25px; border: 1px solid #e1f5fe; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
      
      <!-- Header Section -->
      <div style="text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid #42a5f5;">
        <h2 style="color: #1565c0; margin: 0 0 10px 0; font-size: 1.6em;">🎯 How to Use InsightPrep</h2>
        <p style="color: #0277bd; margin: 0; font-size: 1.1em; font-weight: 500;">Your Complete Guide to Effective Test Preparation</p>
      </div>
      
      <!-- Three Column Layout -->
      <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 25px; margin-bottom: 25px;">
        
        <!-- Column 1: Getting Started -->
        <div style="background: #ffffff; border-radius: 10px; padding: 20px; border: 1px solid #e3f2fd; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
          <div style="display: flex; align-items: center; margin-bottom: 15px;">
            <span style="font-size: 1.5em; margin-right: 10px;">🚀</span>
            <h3 style="color: #1565c0; margin: 0; font-size: 1.2em;">Getting Started</h3>
          </div>
          
          <div style="margin-bottom: 15px;">
            <h4 style="color: #0277bd; margin: 0 0 8px 0; font-size: 0.95em;">📂 Step 1: Load Questions</h4>
            <ul style="margin: 0; padding-left: 15px; font-size: 0.85em; line-height: 1.4; color: #424242;">
              <li><strong>Choose DB:</strong> Load SQLite database files with organized question banks</li>
              <li><strong>Choose JSON:</strong> Load custom JSON files with your own questions</li>
            </ul>
          </div>
          
          <div style="margin-bottom: 15px;">
            <h4 style="color: #0277bd; margin: 0 0 8px 0; font-size: 0.95em;">⚙️ Step 2: Configure Test</h4>
            <ul style="margin: 0; padding-left: 15px; font-size: 0.85em; line-height: 1.4; color: #424242;">
              <li>Select specific topics & subtopics</li>
              <li>Choose question types (MCQ, True/False, etc.)</li>
              <li>Set number of questions (1-500+)</li>
              <li>Pick Random or Balanced selection</li>
            </ul>
          </div>
          
          <div>
            <h4 style="color: #0277bd; margin: 0 0 8px 0; font-size: 0.95em;">🎓 Step 3: Choose Test Mode</h4>
            <ul style="margin: 0; padding-left: 15px; font-size: 0.85em; line-height: 1.4; color: #424242;">
              <li><strong>Learning Mode:</strong> Study with instant feedback</li>
              <li><strong>Exam Practice:</strong> Timed exam simulation</li>
              <li>Select question count and difficulty</li>
            </ul>
          </div>
          
          <div style="margin-top: 15px;">
            <h4 style="color: #0277bd; margin: 0 0 8px 0; font-size: 0.95em;">📝 Step 4: Take Test</h4>
            <ul style="margin: 0; padding-left: 15px; font-size: 0.85em; line-height: 1.4; color: #424242;">
              <li>Answer questions with your chosen mode</li>
              <li>Get explanations (Learning Mode)</li>
              <li>View final score and performance</li>
            </ul>
          </div>
        </div>
        
        <!-- Column 2: Question Types & Features -->
        <div style="background: #ffffff; border-radius: 10px; padding: 20px; border: 1px solid #e3f2fd; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
          <div style="display: flex; align-items: center; margin-bottom: 15px;">
            <span style="font-size: 1.5em; margin-right: 10px;">🎯</span>
            <h3 style="color: #1565c0; margin: 0; font-size: 1.2em;">Question Types</h3>
          </div>
          
          <div style="margin-bottom: 15px;">
            <h4 style="color: #0277bd; margin: 0 0 8px 0; font-size: 0.95em;">📋 Supported Formats</h4>
            <ul style="margin: 0; padding-left: 15px; font-size: 0.85em; line-height: 1.4; color: #424242;">
              <li><strong>MCQ:</strong> Multiple Choice Questions</li>
              <li><strong>True/False:</strong> Binary choice questions</li>
              <li><strong>Assertion-Reason:</strong> Logic-based questions</li>
              <li><strong>Match the Following:</strong> Pairing exercises</li>
              <li><strong>Cohort-05-MCQ:</strong> Special collections</li>
            </ul>
          </div>
          
          <div style="margin-bottom: 15px;">
            <h4 style="color: #0277bd; margin: 0 0 8px 0; font-size: 0.95em;">🎓 Test Modes</h4>
            <ul style="margin: 0; padding-left: 15px; font-size: 0.85em; line-height: 1.4; color: #424242;">
              <li><strong>Learning Mode:</strong> Study with instant feedback & explanations</li>
              <li><strong>Exam Practice:</strong> Timed exam simulation with final scoring</li>
              <li><strong>Quick Options:</strong> 10, 20, 30, 40, 50, or 100 questions</li>
              <li><strong>Real-time Duration:</strong> See estimated time requirements</li>
            </ul>
          </div>
          
          <div style="margin-bottom: 15px;">
            <h4 style="color: #0277bd; margin: 0 0 8px 0; font-size: 0.95em;">✨ Smart Features</h4>
            <ul style="margin: 0; padding-left: 15px; font-size: 0.85em; line-height: 1.4; color: #424242;">
              <li><strong>Balanced Mode:</strong> Equal questions per topic/subtopic</li>
              <li><strong>Try Again:</strong> Retry wrong answers to learn</li>
              <li><strong>Instant Feedback:</strong> Know results immediately (Learning)</li>
              <li><strong>Professional UI:</strong> Distraction-free exam interface</li>
            </ul>
          </div>
          
          <div>
            <h4 style="color: #0277bd; margin: 0 0 8px 0; font-size: 0.95em;">🔄 Restart Options</h4>
            <ul style="margin: 0; padding-left: 15px; font-size: 0.85em; line-height: 1.4; color: #424242;">
              <li>Restart same test with same questions</li>
              <li>Get new set of questions with same filters</li>
              <li>Change filters and create new test</li>
            </ul>
          </div>
        </div>
        
        <!-- Column 3: Pro Tips & Best Practices -->
        <div style="background: #ffffff; border-radius: 10px; padding: 20px; border: 1px solid #e3f2fd; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
          <div style="display: flex; align-items: center; margin-bottom: 15px;">
            <span style="font-size: 1.5em; margin-right: 10px;">💡</span>
            <h3 style="color: #1565c0; margin: 0; font-size: 1.2em;">Pro Tips</h3>
          </div>
          
          <div style="margin-bottom: 15px;">
            <h4 style="color: #0277bd; margin: 0 0 8px 0; font-size: 0.95em;">🏆 Study Strategies</h4>
            <ul style="margin: 0; padding-left: 15px; font-size: 0.85em; line-height: 1.4; color: #424242;">
              <li><strong>Learning Mode:</strong> Best for studying new topics with instant feedback</li>
              <li><strong>Exam Practice:</strong> Perfect for final preparation and time management</li>
              <li>Use <strong>Random mode</strong> for diverse question exposure</li>
              <li><strong>Balanced mode</strong> ensures equal coverage of all topics</li>
              <li>Start with Learning Mode, then switch to Exam Practice</li>
            </ul>
          </div>
          
          <div style="margin-bottom: 15px;">
            <h4 style="color: #0277bd; margin: 0 0 8px 0; font-size: 0.95em;">⚡ Performance Tips</h4>
            <ul style="margin: 0; padding-left: 15px; font-size: 0.85em; line-height: 1.4; color: #424242;">
              <li><strong>Learning Mode:</strong> Review explanations carefully, use "Try Again"</li>
              <li><strong>Exam Practice:</strong> Focus on time management and accuracy</li>
              <li>Target weak topics with filtered question sets</li>
              <li>Take breaks between long sessions for better retention</li>
            </ul>
          </div>
          
          <div>
            <h4 style="color: #0277bd; margin: 0 0 8px 0; font-size: 0.95em;">🔒 Privacy & Security</h4>
            <ul style="margin: 0; padding-left: 15px; font-size: 0.85em; line-height: 1.4; color: #424242;">
              <li>Runs completely offline on your computer</li>
              <li>No internet connection required</li>
              <li>Your data never leaves your device</li>
              <li>100% private and secure</li>
            </ul>
          </div>
        </div>
      </div>
      
      <!-- Bottom Quick Reference -->
      <div style="background: linear-gradient(90deg, #1976d2 0%, #42a5f5 100%); border-radius: 8px; padding: 20px; color: white; text-align: center;">
        <h3 style="margin: 0 0 10px 0; font-size: 1.3em;">🏁 Quick Start</h3>
        <p style="margin: 0 0 15px 0; font-size: 1.05em; opacity: 0.95;">
          <strong>Click "Choose DB" → Select database → Configure filters → Choose Test Mode → Set questions → Start!</strong>
        </p>
        <div style="display: flex; justify-content: center; gap: 30px; margin-top: 15px; font-size: 0.9em; opacity: 0.9;">
          <span>🚀 <strong>Fast Setup:</strong> 30 seconds</span>
          <span>🔒 <strong>100% Private:</strong> Offline app</span>
          <span>📊 <strong>Instant Results:</strong> Real-time feedback</span>
          <span>🎯 <strong>Customizable:</strong> Your topics, your pace</span>
        </div>
      </div>
    </div>
    
    <div id="filter-panel"></div>
    <div id="test"></div>
    <div id="scoreboard"></div>
    <div style="text-align:center;">
      <button id="backToOptions-bottom" style="display:none; margin-right:10px;" title="Go back to the options page to modify filters or settings without choosing database again.">⬅️ Back to Options</button>
      <button id="restart-bottom" style="display:none; margin-right:10px;" title="Restart the current test instantly using the same filters and explanation mode. Does not show the filter screen again.">🔄 Restart Test</button>
      <button id="newTestSameOptions-bottom" style="display:none; margin-right:10px;" title="Start a new test with the same filters and number of questions but different set of questions.">🎲 New Questions</button>
      <button id="newtest" title="Select a new test file. Clears all current progress and lets you load a different set of questions.">📂 Select New Test</button>
    </div>
  </main>


  <div id="swamys-copyright-card">
    <div class="copyright-toggle" onclick="toggleCopyrightCard()">
      <span class="copyright-toggle-icon"></span>
    </div>
    <div class="swamys-copyright-main">
      Architected, Designed &amp; Developed by <span class="swamys-copyright-author">Girish.V</span><br>
      <span class="swamys-copyright-school"><a href="https://www.swamysschool.com" target="_blank" style="color: inherit; text-decoration: none;">Swamy's Group of Schools, Chennai</a></span><br>
      <span class="swamys-copyright-email">contact@swamysschool.com</span>
    </div>
    <div class="swamys-copyright-copy">
      &copy; <span id="swamys-copyright-year"></span>. All rights reserved
    </div>
  </div>

  <script>
    // Function to toggle the copyright card
    function toggleCopyrightCard() {
      const card = document.getElementById('swamys-copyright-card');
      card.classList.toggle('hidden');
      
      // Save the state in localStorage
      const isHidden = card.classList.contains('hidden');
      localStorage.setItem('copyrightCardHidden', isHidden);
    }

    // Restore the state on page load
    document.addEventListener('DOMContentLoaded', function() {
      const isHidden = localStorage.getItem('copyrightCardHidden') === 'true';
      if (isHidden) {
        document.getElementById('swamys-copyright-card').classList.add('hidden');
      }
    });
  </script>
  
</body>
</html>
